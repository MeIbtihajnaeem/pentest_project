<?php 
// Set constants for the database connection
define('DB_SERVER', 'mysql_db');
define('DB_USERNAME', 'root');
define('DB_PASSWORD', 'root');
define('DB_DATABASE', 'assignment');

// Connect to the database
$db = mysqli_connect(DB_SERVER,DB_USERNAME,DB_PASSWORD,DB_DATABASE);
// $dir = 'sqlite:./assignment.sqlite';
// $db  = new PDO($dir) or die("cannot open the database");
$db->query("CREATE SCHEMA IF NOT EXISTS assignment");
$db->query("CREATE TABLE assignment.test ( id INT(11) NOT NULL, name VARCHAR(45), age INT(11), PRIMARY KEY(id) )");
$db->query("CREATE TABLE assignment.users ( id INT NOT NULL AUTO_INCREMENT, username VARCHAR(50) NOT NULL UNIQUE, password VARCHAR(50) NOT NULL, money DECIMAL(20,2) DEFAULT 0.00 NOT NULL, userEnabled BOOLEAN NOT NULL DEFAULT TRUE, isAdmin BOOLEAN NOT NULL DEFAULT FALSE, PRIMARY KEY (id) )");
$db->query("CREATE TABLE assignment.items ( id INT NOT NULL AUTO_INCREMENT, ownersName VARCHAR(50) NOT NULL, title VARCHAR(50) NOT NULL UNIQUE, description VARCHAR(250) NOT NULL, price DECIMAL(20,2) NOT NULL DEFAULT 0.00 NOT NULL, PRIMARY KEY (id), FOREIGN KEY (ownersName) REFERENCES users (username) ON DELETE CASCADE )");

$sql = ("INSERT INTO  assignment.users (username, password, money, userEnabled, isAdmin) VALUES ('Admin', 'e3afed0047b08059d0fada10f400c1e5', 30, true, true)");
$result = mysqli_multi_query($db, $sql);


$sql = ("INSERT INTO assignment.users (username, password) VALUES ('Sammi', '42f749ade7f9e195bf475f37a44cafcb')");
$result = mysqli_multi_query($db, $sql);

$sql = ("INSERT INTO assignment.users (username, password, userEnabled) VALUES ('John Doe', '42f749ade7f9e195bf475f37a44cafcb', false)");
$result = mysqli_multi_query($db, $sql);

$sql = ("INSERT INTO assignment.items (ownersName, title, description, price) VALUES ('Admin', 'House plants', 'Some plants for home', 8.99)");
$result = mysqli_multi_query($db, $sql);

$sql = ("INSERT INTO assignment.items (ownersName, title, description, price) VALUES ('Sammi', 'Cookies', 'Home made choc chip cookies', 5.5)");
$result = mysqli_multi_query($db, $sql);

$sql = ("INSERT INTO assignment.test (id, name, age) VALUES (1, 'Sam', 20)");
$result = mysqli_multi_query($db, $sql);

?>